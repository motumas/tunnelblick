#summary How To Make a "Deployed" Version of Tunnelblick
#sidebar cSb

A minimal "Deployed" version of Tunnelblick can be created very easily if you have access to a Macintosh computer by following the instructions below.

If you do not have access to a Mac please email project owner [http://code.google.com/u/jkbullard/ Jon] for assistance.

==Signed vs. Unsigned Versions==
A copy of Tunnelblick can be signed or unsigned. All non-Deployed versions of Tunnelblick should be signed versions, but signing interferes with some Deployed configurations. Use an unsigned version if users will be able to store usernames/passwords/passphrases in the Keychain and the Deploy folder is added after the Tunnelblick build process (which is where signing is usually done). See [cDigitalSignatures Tunnelblick and Digital Signatures] for details.


Make a "Deployed" version of Tunnelblick on a Mac running Mac OS X 10.6 ("Snow Leopard"):
   # Download Tunnelblick.dmg
   # Drag Tunnelblick.app from the .dmg to the Desktop -- but do not launch it. (This will copy, not move.)
   # Create a folder named "Deploy" on the Desktop
   # Put your configuration file(s) and certificate and key files directly inside the Deploy folder (i.e., they should all be at the top level of the Deploy folder, not inside subfolders)
   # Right- or control-click on the Desktop copy of Tunnelblick.app and select "Show Package Contents"
   # Double-click "Contents"
   # Option-drag the "Deploy" folder and drop it on "Resources" to make a copy
   # Make a duplicate of the (modified) Tunnelblick.app

Test the original (modified) Tunnelblick.app (*not* the duplicate). When you are satisfied with the program's operation, prepare your own .dmg for distribution as follows:
   # Drag the original (modified) Tunnelblick.app to the Trash
   # Rename the duplicate (created in step 8. above) to "Tunnelblick.app"
   # Create a new folder on the Desktop and rename it "Tunnelblick"
   # Copy Tunnelblick.app (from step 2. above) into the folder
   # Launch /Applications/Utilities/Disk Utility
   # Chose "File", then "New", then "Disk Image from Folder"
   # Select the folder you set up in steps 1. and 2. and click the "Image" button
   # Type a name for your .dmg file, and select a location in which to store it
   # Select "Image Format: compressed", and "Encryption: none"
   # Click "Save"

You can then distribute the new .dmg.

Instructions for your users are simple. For Tunnelblick 3.1beta18 and higher, for example:
   # Download the .dmg
   # Double-click the .dmg
   # Double-click "Tunnelblick.app" in the new window that appears
   # Click "Open" when asked if you want to open an application downloaded from the Internet
   # Enter a computer administrator's username and password in the new window that appears, and click "OK"
   # Click "Launch" in the new window that appears
   # Answer as you wish when asked if you want to check for updates automatically

Your users may then click on the Tunnelblick icon at the top right of the screen (next to the Spotlight icon) and click on a configuration to connect to a VPN.

Much more elaborate "Deployed" versions can also be created -- you can have more control over what the user sees and can or cannot do -- see [cCusDeployed Deploying Tunnelblick].

====A Note About Updates====
When Tunnelblick updates itself with a new version from the Tunnelblick website, it preserves the Deploy folder. Thus, your users' configurations will remain intact.

However, you can instruct Tunnelblick to update itself from your website. If the updated version includes a Deploy folder, it will replace the user's Deploy folder. You can use this to update your users' list of VPN servers. Tunnelblick updates are performed by [http://sparkle.andymatuschak.org Sparkle Updater] 1.5b6 which requires updates to be digitally signed for security. You must (in short) modify Tunnelblick's Info.plist SUFeedURL to point to your update's RSS feed and SUPublicDSAKeyFile to contain your public key, and sign your update with your private key. For more information, see the [http://sparkle.andymatuschak.org Sparkle website].

------------------

===PLEASE USE THE [https://groups.google.com/forum/#!forum/tunnelblick-discuss TUNNELBLICK DISCUSSION GROUP] FOR COMMENTS OR QUESTIONS*===