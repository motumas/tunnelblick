#summary Release Notes - Tunnelblick
#sidebar wSb

*<font size="3">Release Notes for Tunnelblick</font>*

<wiki:toc max_depth="2" />

--------------------

*<font size="3" color="red">Security Vulnerabilities</font>*
Bugs causing security vulnerabilities exist in several versions of Tunnelblick. All users of Tunnelblick are advised to update to the latest version. For more information on the vulnerabilities including instructions for updating, see the [vulnerability20110127FAQ 2011-01-27 Vulnerability FAQ] or [vulnerability20110112FAQ 2011-01-12 Vulnerability FAQ].

Versions which are NOT vulnerable:
 3.2 (all)<br>
 3.1.3 and later<br>
 3.0.1 (created for those users who cannot upgrade to 3.1.1)<br>
 3.0b10 and earlier

--------------------

==Version 3.2==

--------------------

*3.2beta06 (2011-04-06)*

 * Allows copy/paste of usernames, passwords, and passphrases in the VPN login window. (For security reasons, passwords and passphrases may only be pasted.)

 * Fixes a bug that sometimes failed to alert the user when a VPN username/password or passphrase failed to be authenticated, making it work better with some OpenVPN servers. (There is still a bug in OpenVPN which causes Tunnelblick to fail to report some failures; this bug is fixed in OpenVPN 2.2rc, which Tunnelblick betas will start using 'soon'.)

 * Allows Tunnelblick VPN Configurations ('.tblk' packages) to be uninstalled. If a Tunnelblick VPN Configuration is double-clicked and the 'TBUninstall' key is included in its Info.plist (with any value), the installed configuration that has corresponding attributes (install location, bundle ID) will be uninstalled. If the key is the string 'ignoreError' (without the quote marks), any failures in the uninstall process will not be reported to the user.

 * Allows the deletion of backups of the Deploy folder by installing a version of Tunnelblick.app which includes an empty /Contents/Resources/Deploy folder. (This allows a user to install a fresh un-Deployed Tunnelblick over a Deployed version.)

 * Moves !LeaseWatch.plist to /Library/Application Support/Tunnelblick so Tunnelblick.app is not modified (thus preserving the validity of the application's digital signature, if any).

 * Adds translations of additional OpenVPN connection status.

 * Includes changes to avoid two false-positive Xcode 3.2.5 analyzer warnings in !NetSocket.m.

 * Fixes a bug that sometimes caused unnecessary 'The change will take effect the next time you connect' messages.

 * Fixes a bug that sometimes caused Tunnelblick to be unable to establish communications with OpenVPN.

 * Fixes a bug that sometimes -- on OS X 10.4 ('Tiger') only -- caused Tunnelblick to hang while quitting or connecting to a VPN server.

 * Fixes a problem that installed nested Tunnelblick VPN Configurations (.tblk packages) incorrectly.

 * Fixes a bug that caused Tunnelblick to refuse to install Tunnelblick VPN Configurations if they contained subfolders.

 * Fixes a bug that caused a Console log entry that a flag file does not exist after installing certain Tunnelblick VPN Configurations (.tblk).

 * Fixes a bug that caused tun/tap kexts to be loaded even though preferences specify that the kext(s) are not to be loaded.

--------------------

*3.2beta04 (2011-02-19)*

 * Adds [wAppleScriptSupport AppleScript support].

 * Includes complete French localization by Jeremy W. Sherman. Thanks, Jeremy!

 * Includes OpenSSL 1.0.0d.

 * Unloading of the foo.tap and foo.tun kexts is now attempted only if they are already loaded (previously, it was always attempted and errors were ignored).

 * Fixes problems with fast user switching (previously, user switches were ignored, which caused problems if Tunnelblick was used by more than one user and could cause the icon to indicate no VPN connection when one existed):
   * When a user is switched out, all configurations that are not set to "connect when computer starts" will be disconnected unless the per-connection "-doNotDisconnectOnFastUserSwitch" preference is set true.
   * When a user is switched in, Tunnelblick will attempt to connect any configurations that were connected at the time the user was switched out but are no longer connected unless the per-connection "-doNotReconnectOnFastUserSwitch" preference is set true.

 * Fixes potential race condition when computer wakes up.

 * Fixes bug that can cause unnecessary warnings about unknown OpenVPN processes.

 * Fixes bug that caused up/down scripts in .tblks to not be executed.

 * Fixes bug that can cause crashes after connecting to a VPN.

--------------------

*3.2beta02 (2011-02-02)*

 * The following scripts may be included in a Tunnelblick VPN Configuration (.tblk package):
   * The 'pre-connect.sh' script is executed (as root) before Tunnelblick would unload and/or load the tun or tap kexts (whether or not any unload or load takes place).
   * The 'post-tun-tap-load.sh' script is executed (as root) after Tunnelblick unloads and/or loads the tun or tap kexts (whether or not any unload or load takes place). Thus, the script is executed immediately before starting OpenVPN.
   * The 'connected.sh' script is executed (as root) when a configuration connects. This script is executed only if Tunnelblick is running at the time of the event, which may not be the case for 'when computer starts' configurations.
   * The 'reconnecting.sh' script is executed (as root) when OpenVPN loses the VPN connection and is trying to reconnect. This script is executed only if Tunnelblick is running at the time of the event, which may not be the case for 'when computer starts' configurations.
   * The 'post-disconnect.sh' script is executed (as root) after OpenVPN has closed the connection. This script is executed only if Tunnelblick is running at the time of the event, which may not be the case for 'when computer starts' configurations.

 * Fixes problem installing Tunnelblick via double-click when the user's home folder is not on the same volume as /Applications/Tunnelblick.app

 * Warns the user if a configuration is set to to connect when the computer starts and it is a Tunnelblick VPN Configuration (.tblk package) which includes a 'connected.sh', 'reconnecting.sh', or 'post-disconnect.sh' script. Those scripts are not executed unless Tunnelblick itself is running when the event occurs, which may not be the case for 'when computer starts' configurations.

 * Tunnelblick (but not third-party) preparation for OS X 10.7 (Lion), including isolating deprecated methods and changes for GCC 4.2. Warnings about 'object file compiled with -mlong-branch' when building Tunnelblick are now _gone_ -- building Tunnelblick generates warnings only for third-party software. (Still generates code for OS X 10.4, 10.5, and 10.6)

 * Fixes a few small memory leaks: one VPNConnection objects per sleep/wake cycle, two NSStrings per connect/disconnect, one NSMutableArray and two NSImages each time the "Use Original Icon" menu command is clicked, several objects each time executeAuthorized is run, and Issue 171.

 * Removed 5 second delay before launching Tunnelblick after installation

 * Removed references to "intValueOfBuildForBundle" because it is no longer used

 * Updated copyright notices and added Free Software Foundation license URL

--------------------

==Version 3.1==

--------------------

*3.1.7 (2011-04-03)

 * Fixes problems causing tun/tap kexts to be loaded even though preferences specify that the kext(s) are not to be loaded.
 * Fixes a problem with installing some Tunnelblick VPN Configurations (.tblk).

--------------------

*3.1.6 (2011-02-19)

 * Fixes a bug that caused up/down scripts in Tunnelblick VPN Configurations (.tblks) to be ignored.

--------------------

*3.1.5 (2011-02-01)*

 * Fixes a bug causing installation/repair failures on OS X 10.4 ("Tiger") PPC.

--------------------

*3.1.4 (2011-01-28)*

 * Fixes a bug causing installation/repair failures on OS X 10.4 ("Tiger").

--------------------

*3.1.3 (2011-01-27)*

 * Fixes a security vulnerability which affects all earlier Tunnelblick 3.1 versions (but not any 3.0 versions).

 * Adds a 'Use Original Icon' item to the 'Options' menu to allow easy switching between the original grayscale Tunnelblick icon and the new yellow-light-at-the-end-of-the-tunnel Tunnelblick icon.
 
 This menu item is not displayed:
  * If the 'doNotShowUseOriginalIconMenuItem' preference item exists and is true; or
  * If Tunnelblick.app/Contents/Resources/IconSets/!TunnelBlick-black-white.TBMenuIcons does not exist; or
  * If the 'menuIconSet' preference exists and contains anything other than '!TunnelBlick.TBMenuIcons' or '!TunnelBlick-black-white.TBMenuIcons'.

 * Displays "(Private)", "(Shared)", or "(Deployed)" after a configuration name only if more than one type of configuration is present.

 * Warns (in the Console log) about missing or incomplete icon sets and attempts to use the standard icon set.

 * Fixes a bug that sometimes misinterpreted the configuration file causing a "No 'dev tun' or 'dev tap' found" warning to appear even when such an option did appear in the configuration file.

 * Fixes a bug that sometimes caused the warning that "OpenVPN is not responding to disconnect requests" to appear when OpenVPN had already responded to a disconnection request.

 * Fixes bugs that sometimes caused Tunnelblick icon to show the "connecting" animation even though a connection attempt has been completed successfully or abandoned, or after abandoning an attempt to hook up to an existing OpenVPN process.

 * Fixes a bug that sometimes caused logging to be disabled if the openvpn-down-root.so plugin were used.

 * Fixes a bug that caused a warning that there are no configurations during the process of updating a "Deployed" version of Tunnelblick.

 * Fixes a bug that could cause Tunnelblick to hang during installation from a disk image. (Not likely to ever happen, though!)

--------------------

*3.1.2 (2010-12-25)*

 * Removes the 'warns the user when certain unexpected disconnections occur' feature added in version 3.1.1 because it caused Tunnelblick to hang under certain conditions of sleep/wake cycles and/or screensavers. This feature will return in more robust form in a future beta release.

--------------------

*3.1.1 (2010-12-18)*

 * Fixes a problem with the left navigation sometimes not being displayed properly when the Details… window does not have left navigation but adding a configuration changes it to have left navigation.

 * Fixes a problem installing Tunnelblick VPN Configurations (.tblk packages) that have a CFBundleIdentifier containing upper-case letters.

 * Fixes a problem when a .tblk that is being installed has a path which includes a component which includes the string '.tblk'

 * Fixes a problem checking permissions on configuration file when user's home folder is not the usual /Users/username folder -- for example, when it is on a network volume (Issue 163).

 * Fixes a problem with the Tunnelblick icon not displaying correctly for multiple simultaneous connections. Now the icon is a closed tunnel if all configurations that the user expects to be closed are in fact closed, is an open tunnel if all configurations that the user expects to be open are in fact open; otherwise the icon is an animation -- neither open nor closed.

 * Fixes a problem trying to set a configuration that is in a subfolder to connect at system start.

 * Fixes openvpnstart crashes when certain errors occurred. (Tunnelblick itself did not crash.)

 * Fixes problems when using 'shadow' configuration files.

 * Warns the user when certain unexpected disconnections occur.

 * Adds a message to the OpenVPN log displayed in the Details… window when Tunnelblick obtains a VPN passphrase or username/password from the Keychain.

 * Waits to go to sleep until all OpenVPN processes have terminated, unless the 'doNotPutOffSleepUntilOpenVPNsTerminate' boolean preference is set true.

 * Changes Tunnelblick icon animation and open tunnel icon to show yellow beyond the tunnel, brightening the icon subtly. To use the old icon animation, set the 'menuIconSet' preference to the string '!TunnelBlick-black-white.TBMenuIcons'. Many thanks to Wes Plate for this new icon set.
 
 * Fixes the inability to display the build number when the Tunnelblick version number that has a period in the build number (as do these 3.1.1 builds).

 * Fixes a typographical error in an error message referring to a known problem in OpenVPN 2.1 -- the error message incorrectly referred to OpenVPN 2.2.

--------------------

*3.1 (2010-12-05)*

 * Only the version and build numbers were updated.

--------------------

*3.1beta24 (2010-12-03)*

 * Updates to use OpenSSL 1.0.0c, which fixes several security vulnerabilities.

 * Searches for the icon set folder in Tunnelblick.app/Contents/Resources/Deploy and then in /Library/Application Support/Tunnelblick/Shared before defaulting to the version in Tunnelblick.app/Contents/Resources.

 * Fixes bug that caused an unneeded folder (dmgFiles) to be built into Tunnelblick.app/Contents/Resources.

--------------------

*3.1beta22 (2010-12-01)*

  * Updated to include OpenVPN 2.1.4 and OpenSSL 1.0.0b.
  
  * Adds a note to the OpenVPN log (in the Details… window) when the computer goes to sleep or wakes up and a connection is terminated/restarted.
  
  * Fixes a problem modifying 'Set nameserver' on other-than-the-first connection.

  * Fixes an OpenVPN problem with special case route targets ('remote_host')

--------------------

*3.1beta20 (2010-10-31)*

  * Removed confusing question when Tunnelblick is launched and foo.tap and/or foo.tun (old Tunnelblick kexts) are loaded. The question asked if foo.tun and foo.tap should be unloaded. Now they are unloaded only as needed to make a connection: foo.tap is unloaded if net.tunnelblick.tap is being loaded for the connection, and foo.tun is unloaded if net.tunnelblick.tun is being loaded for the connection. The 'skipAskingToUnloadFooKexts' preference is no longer used. To override Tunnelblick's automatic loading of the tun or tap kexts required for a connection, see the following per-configuration [wPrefs Preferences]: "-doNotLoadTunKext", "-doNotLoadTapKext", "-loadTunKext", and "-loadTapKext".

--------------------

*3.1beta18 (2010-010-16)*
  * When there are more than eight configurations, the Details… window changes to display a list of connections on the left side and a single tab with the log and controls on the right. This was done because of OS X problems when there are a large numbers of tabs. The 'maximumNumberOfTabs' preference specifies the maximum number of tabs to display; if there are more than that many configurations, the display will change as described above. The preference defaults to 8. Set this preference to 0 to always show configurations in a list on the left.

  * Streamlines installation by double-clicking to have only one dialog box explaining what will be installed and asking for admin username/password.

  * Fixes bug which prevented Standard users from installing Tunnelblick by double-clicking.

  * Fixes bugs in automatic installation of .tblks when installing Tunnelblick.

--------------------

*3.1beta16 (2010-010-08)*
  * Replaces the 'Set nameserver' checkbox with a drop-down list that can display additional choices to allow different up/down scripts to be used.
    * The following choices will always be displayed:
      * 'Do not set nameserver' to not use any scripts                  (equivalent to not having a check in the old 'Set nameserver' checkbox')
      * 'Set nameserver'        to use the standard Tunnelblick scripts (equivalent to having a check in the old 'Set nameserver' checkbox')
    * The following two additional choices will be displayed only if custom scripts are not being used:
      * 'Set nameserver (3.0b10)'      to use scripts from Tunnelblick 3.0b10 (for backward compatibility)
      * 'Set nameserver (alternate 1)' to use scripts based on Ben Low's scripts from http://openvpn.net/archive/openvpn-users/2006-10/msg00120.html. These scripts:
        * Implement multiple domains 'pushed' from the server
        * Fix some issues with some TAP connections that cause 'write to TUN/TAP : Input/output error (code=5)' and other errors
        * Do not implement 'Monitor connection'
    * Note: Some Deployed versions of Tunnelblick and Tunnelblick VPN configurations may include custom scripts that will inhibit the display of these two additional choices.
    * Running this version changes the 'useDNS' per-configuration preference from a boolean to a number. This is a downward-compatible change -- earlier versions of Tunnelblick may be run after running this version and modifying the 'Set nameserver' selection. The earlier version will consider anything other than 'Do not set nameserver' as if the 'Set nameserver' checkbox were checked.
    * Warning: If Build 2054 changes the setting to 'Set nameserver (3.0b10)' or 'Set nameserver (alternate 1)', using an earlier version of Tunnelblick to modify the checkbox so it is checked will revert the setting back to 'Set nameserver'.

  * Adds the ability to add menu items to the Tunnelblick menu to execute programs (e.g., scripts).
  * Adds the ability to specify programs that should be executed when Tunnelblick is launched or when a connection is attempted.
  (See [wCusDeployed#Additional_Menu_Commands_and_Programs Additional Menu Commands and Programs] for details.)

  * Includes localization-related code tweaks by Stefan Bethke and additional German localization by Stefan Bethke, Marcus Schneider, and 'Dr Hok'.

 * Fixes a formatting error when displaying file permissions in error messages about being unable to change permissions.

 * Fixes a problem causing a connection restart when 'Set nameserver' is used, a DHCP renewal occurs, and there are no WINS settings.

 * Fixes issues when using !OpenDirectory and the user's home directory is on a non-Mac platform.

--------------------

*3.1beta14 (2010-09-09)*
 * Fixes Issue 159 problem that, under certain circumstances, crashes client.down.tunnelblick.sh 
 
 * Includes OpenVPN version 2.1.3.

 * Thanks to Mohammad A. Haque: Includes the OpenSSL v. 1.0.0a library imbedded into the included OpenVPN binary. This adds support for the following:

   Digests:<br>
    ecdsa-with-SHA1 160 bit digest size<br>
    MD2 128 bit digest size<br>
    RSA-MD2 128 bit digest size<br>
    RSA-SHA224 224 bit digest size<br>
    RSA-SHA256 256 bit digest size<br>
    RSA-SHA384 384 bit digest size<br>
    RSA-SHA512 512 bit digest size<br>
    SHA224 224 bit digest size<br>
    SHA256 256 bit digest size<br>
    SHA384 384 bit digest size<br>
    SHA512 512 bit digest size<br>
    whirlpool 512 bit digest size<br>

   Ciphers:
    CAMELLIA-128-CBC 128 bit default key (fixed)<br>
    CAMELLIA-128-CFB 128 bit default key (fixed)<br>
    CAMELLIA-128-CFB1 128 bit default key (fixed)<br>
    CAMELLIA-128-CFB8 128 bit default key (fixed)<br>
    CAMELLIA-128-OFB 128 bit default key (fixed)<br>
    CAMELLIA-192-CBC 192 bit default key (fixed)<br>
    CAMELLIA-192-CFB 192 bit default key (fixed)<br>
    CAMELLIA-192-CFB1 192 bit default key (fixed)<br>
    CAMELLIA-192-CFB8 192 bit default key (fixed)<br>
    CAMELLIA-192-OFB 192 bit default key (fixed)<br>
    CAMELLIA-256-CBC 256 bit default key (fixed)<br>
    CAMELLIA-256-CFB 256 bit default key (fixed)<br>
    CAMELLIA-256-CFB1 256 bit default key (fixed)<br>
    CAMELLIA-256-CFB8 256 bit default key (fixed)<br>
    CAMELLIA-256-OFB 256 bit default key (fixed)<br>
    DES-EDE3-CFB1 192 bit default key (fixed)<br>
    DES-EDE3-CFB8 192 bit default key (fixed)<br>
    IDEA-CBC 128 bit default key (fixed)<br>
    IDEA-CFB 128 bit default key (fixed)<br>
    IDEA-OFB 128 bit default key (fixed)<br>
    RC5-CBC 128 bit default key (variable)<br>
    RC5-CFB 128 bit default key (variable)<br>
    RC5-OFB 128 bit default key (variable)<br>
    SEED-CBC 128 bit default key (fixed)<br>
    SEED-CFB 128 bit default key (fixed)<br>
    SEED-OFB 128 bit default key (fixed)<br>

   TLS Ciphers:
    CAMELLIA128-SHA<br>
    CAMELLIA256-SHA<br>
    DHE-DSS-CAMELLIA128-SHA<br>
    DHE-DSS-CAMELLIA256-SHA<br>
    DHE-DSS-SEED-SHA<br>
    DHE-RSA-CAMELLIA128-SHA<br>
    DHE-RSA-CAMELLIA256-SHA<br>
    DHE-RSA-SEED-SHA<br>
    ECDH-ECDSA-AES128-SHA<br>
    ECDH-ECDSA-AES256-SHA<br>
    ECDH-ECDSA-DES-CBC3-SHA<br>
    ECDH-ECDSA-RC4-SHA<br>
    ECDH-RSA-AES128-SHA<br>
    ECDH-RSA-AES256-SHA<br>
    ECDH-RSA-DES-CBC3-SHA<br>
    ECDH-RSA-RC4-SHA<br>
    ECDHE-ECDSA-AES128-SHA<br>
    ECDHE-ECDSA-AES256-SHA<br>
    ECDHE-ECDSA-DES-CBC3-SHA<br>
    ECDHE-ECDSA-RC4-SHA<br>
    ECDHE-RSA-AES128-SHA<br>
    ECDHE-RSA-AES256-SHA<br>
    ECDHE-RSA-DES-CBC3-SHA<br>
    ECDHE-RSA-RC4-SHA<br>
    IDEA-CBC-SHA<br>
    PSK-3DES-EDE-CBC-SHA<br>
    PSK-AES128-CBC-SHA<br>
    PSK-AES256-CBC-SHA<br>
    PSK-RC4-SHA<br>
    SEED-SHA<br>

   For a complete list of available digests, ciphers, and TLS ciphers, type the following into Terminal:
    {{{
    sudo ./openvpn --show-digests --show-ciphers --show-tls
    }}}

   ("sudo" is needed if Tunnelblick.app has been run at least once, because Tunnelblick secures the OpenVPN binary by making it owned and executable only by root.)

--------------------

*3.1beta12 (2010-08-08)*
 * Includes Italian localization thanks to Pierpaolo Gulla (Grazie!).

 * Implements a single, system-wide keyboard shortcut (command-option-F1 by default) to expose the Tunnelblick menu.
   * This make it possible to use Tunnelblick with only a keyboard.
   * The keyboard shortcut may be used whenever Tunnelblick is running - it does not need to be the front-most application.
   * A new submenu of the Options submenu has been added to allow the key to be changed to any of the function keys from F1 through F12. The display of the new submenu is inhibited if the 'doNotShowKeyboardShortcutSubmenu' preference is set to TRUE.
   * Two new unsigned integer preferences: 'keyboardShortcutKeyCode' contains the virtual keycode for the key, and 'keyboardShortcutModifiers' contains the code for the modifier keys. 

 * No longer displays Tooltips by default. They are displayed only if the 'showTooltips' preference is set to TRUE. This is necessary because tooltips on menu items interfere with the proper operation of !VoiceOver, OS X's built-in screen access solution.

 * Terminates faster if going to sleep or if no unknown OpenVPN processes exist and no 'when computer starts' configurations are connected.

 * Works around the following OpenVPN bug: when in the 'RESOLVE' state, the OpenVPN process ignores the first SIGTERM (via kill or management interface) and delays termination for tens of seconds after a second or subsequent SIGTERM. Works around this by warning the user that this is happening, then repeatedly sending SIGTERM and, after a timeout period (default is 180 seconds), considering the connection closed even if OpenVPN doesn't acknowledge the closing. Two new preferences specify the time in seconds between sending SIGTERMs ('openvpnTerminationInterval') and the total maximum time in seconds to wait before considering the connection closed ('openvpnTerminationTimeout').

 * Logs errors trying to create or update 'Launch Tunnelblick' in the private configurations folder.

 * Fixes bugs (race conditions) when the log view is being updated and when !MenuExtras are added.

 * Fixes bug with placement of the 'when computer starts' radio button in non-English versions of Tunnelblick.

--------------------

*3.1beta10 (2010-07-29)*
 * Configurations located in subfolders are displayed in submenus of the main Tunnelblick menu.

 * The 'wizard' that runs when there are no configurations present or when the user selects 'Add a configuration…' has been enhanced.

 * When there are no configurations available, two menu items are displayed in place of the configurations:  'No VPN Configurations Available' and 'Add a Configuration…'. (The 'Add a Configuration…' menu item will not be displayed if the 'doNotShowAddConfigurationMenuItem' preference is true.)

 * An 'Add a Configuration…' menu item was added to the 'Options…' submenu. (It will not be displayed if the 'doNotShowAddConfigurationMenuItem' preference is true.) This menu item starts the configuration wizard.

 * When a Tunnelblick VPN Configuration (.tblk package) is installed, all Tunnelblick VPN Configurations within it will be installed. If these 'inner' configurations are inside subfolders of the outer .tblk, they will be installed as subfolders of the configurations folders and will appear in submenus of the main Tunnelblick menu.

 * Automatic installation of configurations from the .dmg has changed: Only one Tunnelblick VPN Configuration (.tblk packages) in the '.auto-install' or '.auto-install' folders and their subfolders is installed.

 * The ability to install Tunnelblick VPN Configurations from malformed folder contents has been improved.

 * Tunnelblick now tries up to five times to get the login items, avoiding a timing issue.

 * The log display in the Details… window is now read-only from the keyboard.

 * If it doesn't exist, Tunnelblick creates a symlink to ~/Library/Application Support/Tunnelblick/Configurations from ~/Library/openvpn. This avoids a problem when a user launches a new version of Tunnelblick one or more times without having ever used an older version, and then tries to use an older version.

 * Attempts to repair more configuration folder problems, such as the existence of both the old and new folders.

 * Fixes bugs in the shadow copy mechanism that caused connect failures, log-hookup failures, and (possibly) other problems. Thanks to Jim Bo for pointing out the first problem and suggesting a solution.

 * Fixes bug that caused tun/tap kexts to fail to unload when a connection was closed

 * Fixes incorrect help message for 'openvpnstart'

--------------------

*3.1beta08 (2010-07-10)*
  <font color="red">*IMPORTANT NOTE FOR THOSE USING "WHEN COMPUTER STARTS" WITH EARLY 3.1BETA VERSIONS:*</font> The first time that you update to Tunnelblick 3.1beta08 or above from 3.1beta02 - 3.1beta06, Tunnelblick will not recognize any *running* "when computer starts" configurations. Five to ten seconds after you start Tunnelblick, they will be identified as unknown OpenVPN processes and you will be given the choice to leave them alone or disconnect them. You should chose to disconnect them in this dialog and then manually connect them in Tunnelblick. (You do not need to do this immediately, but you will not be able to control them with Tunnelblick. The dialog will appear each time you start Tunnelblick if these connections are still active.) This need only be done once, and is not necessary if there are no "when computer starts" configurations that are connected at the time you update.

  * Benji Greig has created an updated Tunnelblick icon that looks great in Coverflow. He has also created a distinctive icon for Tunnelblick VPN Configurations, and a new background image for the Disk Image. Thanks, Benji!

  * Log processing and display have been rewritten:
    * OpenVPN log files are kept in /tmp/tunnelblick/logs using filenames encoded with the configuration file path, the management port number, and the arguments to openvpnstart when the connection was created.
    * Script log files are kept in the same directory, using filenames encoded with the configuration file path.
    * Log files are created each time a connection is made. 'Pipes' are no longer used for the script files, and the OpenVPN management interface is not used to process log data. 
    * When displaying the log, the entries are merged such that script log entries follow OpenVPN log entries that have the same date/time.
    * The log display now shows the most recent 10000 entries. Earlier entries are not displayed, but they are available in the log files stored in /tmp/tunnelblick/logs.
    * Formatting of the log display is improved."

  * The DNS cache is flushed after a tunnel is established and after it is torn down. This is enabled by default but may be disabled by the per-connection "-doNotFlushCache" preference.

  * Tunnelblick VPN Configurations (.tblk packages) may now be shadow copied

  * Configurations (.conf, .ovpn, and .tblk) may be stored in subfolders. Note that .tblk configurations are installed at the top level of the shared or private folder; they must then be moved to a subfolder if that is desired.

  * Sets share/private button to 'Share configuration' when it is disabled.

  * Fixes bug that caused 'Ignoring change of Network Primary Service' message to be displayed when no change occurred.

  * Fixes bug that caused unload of tun/tap kext at exactly the right time while a restart was taking place if the user disconnected a different configuration that used the same tun/tap kext.

  * Fixes bug that caused .conf configuration files to be ignored.

  * Fixes bug that caused failure to connect if "Monitor connection" was checked and the standard up script was used.

  * Fixes bug that caused restarts to fail if a different configuration was disconnected at exactly the right (or wrong!) time.

  * Fixes bug that didn't clean up when installation of a .tblk package failed.

  * Fixes bug that caused 'Set nameserver' script (i.e., 'leasewatch') to be run when it is not necessary.

  * Fixes bug that caused launch of leasewatch script (when 'Set nameserver' is checked) to fail if automatically connecting when computer starts

  * Fixes bug which causes format errors in the log display if a script generates log entries which don't have a "`*`" after the date/time. (Inserts a "`*`" in such entries in the log display.)

--------------------

*3.1beta06 (2010-06-07)*
  * Takes into account both the 'dev-type' and 'dev' options in the configuration file when trying to determine if it is a 'tun' or 'tap' connection. Tunnelblick tries to determine that so it can load only the tap or tun kext (device driver) that is required. Note: there appears to be a bug in OpenVPN that makes the dev-type option fail; this does not help that problem.

 * Runs new scripts, pre-connect.sh and post-disconnect.sh, as root before connecting and/or after disconnecting if the scripts exist. (They must be in a .tblk package). This allows manipulation of kexts and/or the network configuration before the tun/tap kexts are loaded and OpenVPN is run and after OpenVPN exits and the kexts are unloaded.

  * Changed "Online Documentation.webloc" that is put in the .dmg so it will go to the new main documentation page.

  * Fixes bug that caused .conf configuration files to be ignored.

  * Fixes bug that caused failure to connect if "Monitor connection" was checked and the standard up script was used.

  * Fixes bug that caused restarts to fail if a different configuration was disconnected at exactly the right (or wrong!) time.

  * Fixes bug that didn't clean up when installation of a .tblk package failed.

--------------------

*3.1beta04 (2010-05-27)*
  * Creates pipes for script output to "Details…" window on demand instead of when Tunnelblick launches

  * Deletes logs for 'when computer starts' connections when they are disconnected

  * Doesn't un-check 'Connect automatically' if administrator permission to change from 'when Tunnelblick launches' to 'when computer starts' is cancelled, so connect 'when Tunnelblick launches' will remain in effect

  * Allows cancel out of dialog asking if 'openvpn-down-root.so' should be used

  * Marks start and end of OpenVPN log entries from before Tunnelblick was launched

  * Displays a notice if then OpenVPN log entries from before Tunnelblick was launched are more than 10,000,000 bytes long.

  * Includes path of openvpnstart to be used in Console log messages that a configuration will 'connect when computer starts'

  * Reinforces security of openvpnstart -- it now verifies it is protected before doing any operations

  * Reformats dates in OpenVPN log entries from before Tunnelblick was launched to YYYY-MM-DD HH:MM:SS

  * A DHCP renew which restores the original DNS and/or WINS information no longer causes the connection to restart. This new behavior can reversed be by setting Tunnelblick the boolean preferences '-doNotRestoreOnDnsReset' and/or '-doNotRestoreOnWinsReset' to TRUE.

  * Modified the up, down, and leasewatch scripts:
    * client.up.osx.s and client.nomonitor.up.osx.sh are replaced by client.up.tunnelblick.sh
    * client.down.osx.s and client.nomonitor.down.osx.sh are replaced by client.down.tunnelblick.sh
    * The up and down scripts may be called with optional arguments (before the standard OpenVPN-supplied arguments) that are prefixed by a '-'. The arguments are:
      * -m to monitor the network configuration (reflects the 'Monitor connection' checkbox);
      * -w to cause restoration of expected WINS configuration if it changes to the pre-VPN configuration (via DHCP renewal, for example); and
      * -d to cause restoration of expected  DNS configuration if it changes to the pre-VPN configuration (via DHCP renewal, for example).
    * The -w and -d options are specified if the boolean Tunnelblick preferences '-doNotRestoreOnDnsReset' and/or '-doNotRestoreOnWinsReset' are TRUE.
    * The up script saves, and leasewatch and the down script access, additional parameters (the state of the optional arguments, network primary service ID, and logfile path) in the System Configuration database as /Network/OpenVPN/...
    * The up script saves the pre-VPN WINS (SMB) configuration in the System Configuration database as /Network/OpenVPN/OldSMB
    * The down script ignores the optional arguments (accessing any it needs via the System Configuration database)
    * leasewatch behavior has changed, although a Tunnelblick preference restores the old behavior. It used to restart the connection if the DNS or WINS configuration changed from the post-VPN-creation configuration (which reflects 'pushed' values from the OpenVPN server). This caused a restart of the connection when a DHCP renewal changed the settings to the pre-VPN configuration. This situation is now detected, and the DNS and/or WINS configurations are restored to the post-VPN-creation configuration instead of restarting the connection. This new behavior may be inhibited (forcing the old behavior to restart the connection) by setting the boolean Tunnelblick preferences '-doNotRestoreOnDnsReset' and/or '-doNotRestoreOnWinsReset' to FALSE.
    * Tunnelblick itself has been modified to use the new scripts, but only if the old scripts are not present. That means that an automated build process, for example, which replaces client.up.osx.sh with a customized version, will continue to work, because Tunnelblick will see the old script, and use that instead of using the new script (even if the new script is present).
    * The openvpnstart 'bitMask' argument has additional bits that specify options to send to the scripts (as described above)

  * openvpnstart puts a warning in the OpenVPN log (in the Details… window) if the path to the up or down script is very long, which could result in OpenVPN sending incomplete arguments to the scripts. (OpenVPN truncates the command line it uses to start the scripts to 255 characters.)"

  * Warnings from the openvpnstart program are now included in the OpenVPN log displayed in the 'Details…' window

  * Fixes bug that caused load of tap devices to fail when connecting

  * Fixes bug that sometimes caused log file contents not to display

  * Fixes bug that caused output from leasewatch ('Monitor connection' checkbox checked) to be stored in a /tmp file instead of displayed in the OpenVPN Log on the Details... window for Tunnelblick VPN Configurations (.tblk packages)

  * Fixes bug with 'connect on computer start' causing Tunnelblick to ask, in error, to flip the value of the checkbox

  * Fixes bug with 'when Tunnelblick launched' and 'when computer starts' radio buttons

--------------------

*3.1beta02 (2010-05-14)*
  * Polish (PL) localization by Grzegorz Danecki. Dziękuję bardzo!
  * Additional Norwegian (Bokmål, NB) localization by Jon Luberth. Tusen takk!
  * Additional French (FR) localisation by François Varas. Merci beaucoup!
  * Additional Catalan localization by Aleix Dorca. Moltes gràcies!

  * Many thanks also to Michael Williams. Many new enhancements are possible due to the his work. He contributed code that allows configurations in more than one folder to be available simultaneously. This has triggered an overhaul of the way Tunnelblick handles configurations, adding many new features.

  * Configurations may now be shared among all users of a computer, or they may be private to a particular user.
    * A new button in the 'Details…' window makes changing the availability of a configuration easy. The button displays either 'Share configuration' or 'Make configuration private', as appropriate.
    * To be shared, a configuration must be a 'Tunnelblick VPN Configuration' (see below).
    * The Shared folder (/Library/Application Support/Tunnelblick/Shared) and its contents are protected. It is owned by root and may only be modified by administrators.
    * Shared configurations (like deployed configurations) may only be examined, not edited. (But you can make it private, edit it, and then share it).

 * A new kind of configuration, a 'Tunnelblick VPN Configuration', may be used and may be shared among all users of a computer, or remain private to an individual user (see [wPkgs Tunnelblick VPN Configurations] for details):
    * A Tunnelblick VPN Configuration is an OS X folder with an extension of '.tblk'.
    * A Tunnelblick VPN Configuration includes one .ovpn configuration file, and many include key and certificate files and shell scripts. It can also include default settings for per-configuration preferences and version information to help manage enterprise distribution of configurations.
    * Tunnelblick VPN Configurations must be installed before they can be used. They can be installed by double-clicking them, or dragging and dropping them on a Tunnelblick icon in Finder (but not the Tunnelblick icon in the Status Bar near the Spotlight icon). They can also be automatically installed when installing Tunnelblick by including them in the disk image. The user is given the option of installing them as private or shared. All of this behavior can be controlled and/or inhibited by preferences, which can be 'forced' in a Deployed version of Tunnelblick.
    * Tunnelblick VPN Configurations and their contents are secured. Key and certificate files, for example, may not be read by the user. (The protection is not as robust as that for Deployed configurations, so that users may edit the configuration, but they are secure in the sense that a user is never allowed to use a configuration that has not been authorized by a computer administrator.)

  * Tunnelblick can now start Tunnelblick VPN Connections (clients or servers) when the computer starts:
    * A new option in the Details window is available for Shared and Deployed .tblk packages: to connect automatically 'when the computer starts'.
    * When Tunnelblick is launched, it attaches itself to any OpenVPN processes which were started because of that option and allows control (disconnect/connect) of them, and displays their logs.
    * When Tunnelblick quits, it closes only those connections which do not have 'when computer starts' selected. Thus OpenVPN instances started outside of Tunnelblick will continue, as will those started by Tunnelblick at any time that have 'when computer starts' selected at the time Tunnelblick quits.
    * If any unknown OpenVPN processes are running a few seconds after Tunnelblick is launched (i.e., after it has 'hooked up' to ones it started because of the 'when the computer starts' option), it pops up a window which gives the user the option to terminate them or ignore them. A checkbox in the window allows the user to 'Do not display this message again, always ignore'. There is a preference, 'hookupTimeout' that is the number of seconds to try, with a default of five seconds.
    * Note that these 'when the computer starts' configurations must not ask for usernames, passwords, or private keys. (There is no user to ask, and no Tunnelblick to pull them out of the Keychain and give to OpenVPN.)

  * Tunnelblick now deals with the .tun and .tap kexts more flexibly:
    * Loads and unloads them on demand: loaded at connect, unloaded at disconnect. An load is ignored if the kext is already loaded and an unload is ignored if the kext is in use. 
    * Scans the configuration file to determine if 'tap' or 'tun' is being used, and loads only the appropriate kext at connect. (Tunnelblick uses whatever is specified in the first 'dev' option in the configuration file.)
    * New per-configuration preferences can be used to override the automatic detection of which kexts to load at connect: -loadTapKext, -loadTunKext, -doNotLoadTapKext, and -doNotLoadTunKext are all to be prefixed by the configuration name. (If both 'load…' and 'doNotLoad…' preferences exist for a specific configuration, the specified kext will not be loaded.)
    * When Tunnelblick launches, it unloads net.tunnelblick.tun and net.tunnelblick.tap so that the versions in use will always be loaded from the running version of Tunnelblick.app. The unload will not occur if the kexts are in use -- for example, by an instance of OpenVPN started when the computer started.
    * If foo.tap and foo.tun are loaded when Tunnelblick launches, it offers to unload them. (They are the old Tunnelblick kexts.) This simplifies the transition to the new net.tunnelblick.tun/tap for most users without a computer restart.

  * Configurations are now listed in case-INsensitive alphabetic order and are no longer surrounded by single-quote marks on the drop-down menu.

  * You can now include private and/or shared configurations in Deployed configurations. This is NOT DONE UNLESS a preference named 'useLibraryConfigurationsWithDeployedOnes' and/or 'useSharedConfigurationsWithDeployedOnes' (boolean) is forced TRUE in the 'forced-preference.plist' file.

  * If a deployed configuration and/or a shared configuration and/or a normal configuration ( in ~/Library/Application Support/Tunnelblick/Configurations) have the same names, the deployed one will be displayed if it exists, otherwise the shared one will be displayed if it exists, and the other(s) will be hidden and unavailable. A warning will be issued to notify the user if any configurations are hidden.

  * Shared configurations are indicated by '(Shared)' after their names in the Tunnelblick menu and in the title of the "Details…" window, and private configurations are indicated by '(Private). If there are also deployed configurations, they are indicated by '(Deployed)' after their names.

  * The 'Edit Configuration' button becomes 'Examine Configuration' when the configuration may not be edited, i.e., it is a Deployed or Shared configurations.

  * Editing a configuration file requires it to be unprotected first, even on Snow Leopard.

  * After unprotecting a configuration file, the previous version (which is still protected) is available as xxx-previous. (If a non-administrator accidentally or mistakenly unprotects a configuration they will still be able to connect by using the xxx-previous version.)

  * The full path of the configuration file is displayed as a tooltip for connection names in the Tunnelblick menu.

  * Tunnelblick now detects it is located on a volume which doesn't support suid (thumb drives and network volumes, for example). In that circumstance, Tunnelblick offers to install itself to /Applications on the boot volume (the same way it does when Tunnelblick.app is located on a disk image).

    * Note that although Tunnelblick cannot run from such a volume, configurations can reside on such a volume, or even on a volume that does not support root ownership of files, such as a network volume or a volume formatted as FAT32. Configurations on such a volume will be 'shadow copied' to the boot volume before being used. This is done automatically for network volumes, and will be done for non-network volumes if the 'useShadowConfigurationFiles' preference is true.

  * Changed title of 'OpenVPN Log - Tunnelblick' window to 'Details - Tunnelblick'.

  * Removed extra Console Log message that the program needed repair.

  * Fix omission and improve formatting of openvpnstart command line tool.

  * Deals better with situation of ~/Library/openvpn and /Library/Application Support/Tunnelblick/Configurations being inconsistent.

  * Fixed bug that sometimes ignored the 'updateSendProfileInfo' preference.

  * Fixed bug that sometimes send partial anonymous profile information when checking for updates.

  * Fixed bug that caused wildcard matches of forced preferences to always fail.

  * Fixed bug that allowed setting of user preferences for forced preferences (although they are then ignored).

  * Fixed bug that caused incorrect permissions (644) to be set on subfolders of Tunnelblick.app/Contents/Resources/Deploy, making them inaccessible. If an existing deployed version of Tunnelblick has such subfolders, upon update (via the built-in updater or a fresh .dmg) the permissions of subfolders will be corrected (to be 755) at first launch).

  * Fixed bug that sometimes created and used shadow copies of Deployed configurations.

  * Fixed bug that caused unnecessary check of ownership/permissions of Tunnelblick.app/Contents/Resources/Deploy.

--------------------

==Version 3.0==

--------------------

*3.0.1 (2011-01-12)*

 * Fixes bug that causes a serious [vulnerability20110112FAQ security vulnerability].
 * Fixes bugs relating to forced-preferences.plist wildcards used in Deployed versions of Tunnelblick.
 * Added full Norwegian localization and added missing German localization of one string.
 
--------------------

*3.0 (2010-03-03)*
  * Fixes incorrect display of 'Automatically Check for Updates' preference on first run after some updates.
  * Out of beta!

--------------------

*3.0b28 (2010-02-24)*

  * Wildcards for forced preferences (see [DeployingTunnelblick Deploying Tunnelblick]).
  * Displays configuration name in title of "Details…" window.
  * Inserts full command line used for starting OpenVPN into the "Details…" window.
  * Full German localization. Many thanks to Markus Schneider.

--------------------

*3.0b26 (2010-02-09)*
  * Now uses OpenVPN version 2.1.1.
  * Adds Chinese localization (both simplified and traditional). Many thanks to Aming Lau.
  * Installation has been simplified: The Tunnelblick disk image gives instructions to "Double-click to begin" in several languages. Double-clicking starts a small installer. The installer detects installs/reinstalls/upgrades/downgrades and puts the current copy of Tunnelblick.app in the Trash before replacing it, then offers to launch the new version. Warns about other copies of Tunnelblick running during an install and offers to stop them. (Simply copying Tunnelblick.app to /Applications or elsewhere on the hard drive still works, too.)
  * The "Welcome to Tunnelblick" window now gives the user much more information, and offers the options of creating and editing a sample configuration file or opening the Configurations folder in Finder.
  * Uses Sparkle Updater version 1.5b6 for better security. Updates must be signed with 2048-bit DSA signatures. Updating behavior is now controlled by Tunnelblick preferences, which may be forced. Deployers note: many of these preferences should be forced for security reasons in a deployed environment.
  * Tunnelblick now explains why it is asking for an administrator username/password in authentication dialogs.
  * Tunnelblick's "Details…" window now includes detailed information about why a connection was restarted by leasewatch (when the 'Monitor connection' checkbox is checked).
  * The program's menu has been streamlined.
  * Connection timers are now displayed by default (unless the 'showConnectedDurations' preference is FALSE).
  * Fixes problem editing configuration files on Tiger and Leopard by allowing non-admin users (without an administrator username/password) to unprotect the configuration file before invoking `TextEdit`. This ability can be disabled with the 'onlyAdminsCanUnprotectConfigurationFiles' preference. On Snow Leopard (which automatically unprotects files when they are modified), warns user that an administrator username/password will be required to connect if the configuration file is modified. Note: The 'Edit Configuration' button may be still disabled with a per-configuration  preference.
  * Enhancements: Displays command line used to launch 'openvpnstart' in the "Details…" window. Detects and gives a detailed error message if a configuration file is identical to the sample provided by Tunnelblick. Creates a "Launch Tunnelblick" link in the Configurations folder. Localizes paths that are displayed to the user -- for example, in French (FR), 'Library' becomes 'Bibliothèque'. Detects, complains, and quits if not running on OS X 10.4 ("Tiger") or above. Added Quick Start Guide to disk image.
  * Bug fixes: Fixes bug that caused crashes when started automatically on login on some versions of Leopard and Snow Leopard. Fixes bug that didn't localize the title for the "Details…" window. Fixes bug that displayed 'monitoring connection' when 'Set nameserver' is not checked. Fixes bug opening wrong copy of sample configuration file in `TextEdit`. Fixes bug that tries to to create Configurations folder when not necessary. Fixes bug that tried to create configuration file in Deploy. Fixes typo in dialog for remote home folders. Fixes sporadic failure to detect multiple simultaneous connections.
  * Known Issues: See the [KnownIssues Known Issues wiki].

--------------------

*3.0b24 (2009-12-12)*
  * New 'Monitor connection' checkbox in the "Details…" window (defaults to checked). When checked, Tunnelblick monitors connection interfaces as it has since 3.0b18. When unchecked, Tunnelblick ignores connection interface changes, as version 3.0b10 did. This allows more users to use the latest version (some users couldn't because of repeated restarts caused by Tunnelblick detecting connection interface changes). Please note that OpenVPN itself restarts connections under certain circumstances. New scripts are used when 'Monitor connection' is not checked and 'Set DNS' is checked: client.nomonitor.up.osx.sh and client.nomonitor.down.osx.sh.
  * New 'Options' submenu has entries to change commonly used preferences, check for updates, and view the 'About…' window.
  * Tun/tap kernel extensions are loaded when Tunnelblick launches and unloaded when Tunnelblick quits.
  * Configuration and other files are now located in ~/Library/Application Support/Tunnelblick/Configurations to conform to OS X standards. The ~/Library/openvpn folder is moved to this new location automatically during the first launch of Tunnelblick after updating to 3.0b24, and is replaced by a symbolic link to the new location. For details see [http://groups.google.com/group/tunnelblick-discuss/t/d8f000d1e854b39d http://groups.google.com/group/tunnelblick-discuss/t/d8f000d1e854b39d].
  * Adds Català (Catalan) localization, thanks to Aleix Dorca.
  * Additional Español (Spanish) and Deutsch (German) localization, thanks to Diego Rivera and Markus Schneider, respectively.
  * Adds OS X version information to the start of the OpenVPN Log.
  * Adds configuration, 'Set nameserver', and 'Monitor connection' status to the OpenVPN Log before attempting to make a connection.
  * Adds new Deployment features:
    * Always restores the Resources/Deploy folder from a backup if it does not exist and a backup does. An entry is put in the Console Log, but no other user notification is made. (This happens after an auto-update without the Deploy folder.)
    * Monitors Resources/Deploy (if it exists) for changes to configuration files.
    * If Deploy contains only `*`.conf, `*`.oven, `*`.up.sh, `*`.down.sh, and forced-preferences.plist files, then the ~/Library/openvpn folder will be used for all other files (including other scripts).
    * If 'Set nameserver' is checked and 'Monitor connection' is checked, then if Deploy/_CONFIGNAME_.up.sh exists, it will be used instead of Resources/client.up.osx.sh, and if Deploy/_CONFIGNAME_.down.sh exists, it will be used instead of Resources/client.down.osx.sh.
    * If 'Set nameserver' is checked and 'Monitor connection' is _not_ checked, then if Deploy/_CONFIGNAME_.nomonitor.up.sh exists, it will be used instead of Resources/client.nomonitor.up.osx.sh, and if Deploy/_CONFIGNAME_.nomonitor.down.sh exists, it will be used instead of Resources/client.nomonitor.down.osx.sh.
    * If 'Set nameserver' is checked, then if the '_CONFIGNAME_-useDownRootPlugin' preference is true, then Resources/openvpn-down-root.so will be used as a plugin for OpenVPN.
    * Sets owner to root:wheel and permissions to 600 for .cer, .crt, .der, .key, .p12, .p7b, .p7c, .pem, and .pfx files in the Deploy folder.
  * Adds new per-configuration preferences:
    * 'CONFIGNAMEdisableEditConfiguration' is a boolean. If set, disables the 'Edit configuration' button. If cleared (the default), enables the button.
    * '_CONFIGNAME_-notMonitoringConnection' is a boolean. If present, its value reflects/is used for the 'Monitor connection' checkbox. Default is set.
    * '_CONFIGNAME_-useDownRootPlugin' is a boolean. If set, causes the 'openvpn-down-root.so' plugin to be loaded. If cleared (the default), the plugin is not loaded.
  * Closing a connection, putting the computer to sleep, or quitting Tunnelblick may be delayed a few seconds while Tunnelblick waits for OpenVPN processes to terminate.
  * Bug fixes: Fixes bug that sometimes caused authentication failures with usernames or passwords longer than 12 characters. Fixes bug that sometimes caused the 'Retry' button to be interpreted as 'Cancel' in the Authentication Failed dialog. Fixes bug that caused a connection attempt to fail with a 'script failed: could not execute external program' error if 'Set nameserver' is checked and there is a space character in the name of Tunnelblick.app or in the path to it. Fixes bug that caused 'Get Info' of Tunnelblick.app to show incorrect copyright information. Fixes bug that often caused loss of last few lines of OpenVPN Log before disconnecting. Fixes bug that sometimes caused problems restoring connections when awakening from sleep. Fixes bug that sometimes caused the Sparkle updater window to not appear on Snow Leopard. Fixes inconsistent logging of ownership/permissions repairs. Fixes bug that caused Tunnelblick to check for updates at launch even though preference to do so was cleared, not set. Fixes bug that ignored forced-preferences.plist when there was no configuration files in Deploy. Fixes bug with configuration files that are actually symbolic links. Fixes bug that didn't verify that ownership/permissions on Deploy contents copied correctly to backup. Complains with specific message in Console log if a configuration file needs repair but is locked. Fixes problems when a configuration file is a link.

Known Issues:
  * The standard scripts that "Set nameserver" uses handle DNS for most common setups. You must use custom scripts to do anything else. See [UsingTunnelblick Using Tunnelblick] for details.
  * Localization is not complete.

--------------------

*3.0b22 (2009-11-01)*
  * Includes OpenVPN version 2.1_rc20, which fixes problems with the "redirect-gateway" option.
  * Includes the 32/64-bit version of tuntap, which fixes problems running Tunnelblick on Snow Leopard under the 64-bit kernel. Thanks to the tuntap project, to Mohammad A. Haque for Xcode help, and to Jean-Philippe Jung for testing.
  * Stores username in Keychain instead of preferences.
  * Stores shadow copies of configuration files in /Library/Application Support/Tunnelblick/Users/_username_ instead of /Library/Tunnelblick/_username_.
  * Bug fixes: Fixes bugs that interfere with storage or retrieval of usernames and passwords. Adds new configs to "Details…" window when it has been opened but is currently closed. Clears "Automatically launch Tunnelblick upon login" for error exits. Clean exit if 'running from .dmg' error. Fixes several memory and CF leaks. Fixes bug that caused attempt to kill openvpn process that had already been killed. Fixes potential problem detecting locked configuration files during shadow copying. Installer detects and reports errors making ownership and permission modifications.
  * Enhancement: Creates openvpn-down-root.so and puts a copy of it in Tunnelblick.app/Contents/Resources, allowing use of OpenVPN 'user' and 'group' options by adding a line to the configuration file. See[UsingTunnelblick Using Tunnelblick] for details.
  * Deployment enhancements: Several changes have been made which make it easy to create a customized version of Tunnelblick that can easily be deployed to multiple clients or installed once for all users of a computer. Configuration, key, and certificate files and up/down scripts can be put into a Deploy folder within Tunnelblick.app, and Tunnelblick will use them instead of using files in ~/Library/openvpn. These files are read-only, and, combined with read-only preference overrides, can create a tamper-proof application. Such deployed applications may be updated via the automatic update mechanism without losing the configuration information. Detailed information is available in [DeployingTunnelblick Deploying Tunnelblick].
  * Other enhancements: Clarifies language in a few places. Adds a specific error message if unrecoverable error. Warns if all config files removed and gives a choice of quitting or installing and editing a sample config file. Warns if zero-length passphrase, username, or password. Adds Tunnelblick icon and the configuration name to all applicable dialog windows. Puts dialogs on top of other windows. 

Known Issues:
  * The standard scripts that "Set nameserver" uses handle DNS for most common setups. You must use custom scripts to do anything else. See [UsingTunnelblick Using Tunnelblick] for details.
  * Localization is not complete.

--------------------

*3.0b20 (2009-10-09)*
  * Fixes issues with "Set nameserver" on Snow Leopard.
  * Inhibits console message that tun and tap are already loaded.
  * Sends details of some error messages to the "Details…" window instead of the Console log.
  * Prefixes all non-OpenVPN messages in the log window with "`*`Tunnelblick:".

Known Issues:
  * Does not work under Snow Leopard when booted into 64-bit mode. (Works when booted into 32-bit mode.)
  * The "--redirect-gateway" OpenVPN option fails silently, causing incorrect routing, if no flags are specified (which is a syntax error). Previously, a flag of "def1" was assumed.
  * Localization is not complete.
  * The standard scripts that "Set nameserver" uses handle DNS for most common setups. You must use custom scripts to do anything else. See [UsingTunnelblick Using Tunnelblick] for details.

--------------------

*3.0b18 (2009-09-23)*
  * Implements different behavior when configuration files change: when a configuration file is added, all connections are maintained. When a configuration file is deleted, only the corresponding connection is disconnected (and an alert window is displayed). In either case, the menu and Log window reflect the change immediately without restarting Tunnelblick. Changes to a configuration file's contents or metadata are ignored (but will be used the next time a connection is attempted).
  * Works with home folders on network volumes and/or when the home folder is not permitted to have files owned by root. This is implemented transparently with "shadow" copies of configuration files. It is automatic if the config file is on a network volume or if Tunnelblick's "useShadowConfigurationFiles" preference is set.
  * Moves "Set nameserver" checkbox to avoid inadvertent changes.
  * Fixes issues when DNS is set manually, when 'dhcp-option DOMAIN ...' is pushed to the client, and when --remote-random is used under certain circumstances.
  * Fixes misleading language in window that requests a username/password for the VPN.
  * Fixes a bug which caused "Details…" window to stay on top of all other windows if it was opened within 3 seconds of starting Tunnelblick.
  * Fixes a bug which caused config file changes to be ignored under certain circumstances.
  * Fixes a bug which interferes with saving a username/password combination or a passphrase to the Keychain when there is more than one simultaneous connection.
  * Fixes a bug which causes a (quitable) infinite loop if an error occurred while changing ownerships and/or permissions.
  * Fixes a bug which sometimes causes non-English text of buttons or checkboxes to be truncated or clipped.
  * Makes changes to ownership and permissions of parts of Tunnelblick.app for better security.
  * Adds support for WINS configurations from the server when using the standard up/down scripts (i.e., when the "Set nameserver" checkbox is checked).
  * Warns about multiple simultaneous connections, with a checkbox to suppress such warnings.
  * Displays duration times only for connected tunnels.
  * Updated to UKKQueue 0.5 and LZO 2.03
  * Adds Spanish localization (thanks to Diego Rivera).

Known Issues:
  * Does not work under Snow Leopard when booted into 64-bit mode. (Works when booted into 32-bit mode.)
  * The "--redirect-gateway" OpenVPN option fails silently, causing incorrect routing, if no flags are specified (which is a syntax error). Previously, a flag of "def1" was assumed.
  * Localization is not complete for French, German, Japanese, Korean, Norwegian, or Spanish.
  * The standard scripts that "Set nameserver" uses handle DNS for most common setups. You must use custom scripts to do anything else. See [UsingTunnelblick Using Tunnelblick] for details.

--------------------

*3.0b16 (2009-08-22)*

  * Upgraded to OpenVPN version 2.1_rc19
  * Additional French translations (contributed by Oliver Hill)
  * An entry is appended to the "Details…" window if OpenVPN returns with an error code. (This typically happens when there is an error in the configuration file.)

Known Issues:
  * Home folders cannot reside on remote volumes (AFS, NFS, etc.)
  * Japanese and Norwegian localization is not complete.
  * The standard scripts that "Set nameserver" uses handle DNS for the most common DHCP setups. You must use custom scripts to do anything else. The standard scripts:
      * Do not support multiple simultaneous connections
      * Do not support multiple nameservers for multiple domains (e.g., local nameserver and remote nameserver simultaneously)
      * Do not remove manual DNS entries (i.e., the manual nameserver will continue to be used even when the tunnel is open even if the OpenVPN "redirect-gateway" option is specified)

--------------------

*3.0b14 (2009-08-10)*

  * Fixed issues where DNS settings were not saved properly, and when DHCP is renewed (contributed by Diego Rivera)
  * Added support for PKCS#11 and Security Tokens, e.g. Aladdin eToken (contributed by Xaver Loppenstedt)
  * Additional Korean and German translations (contributed by Markus Schneider and Kyoungmin Kim)
  * Animation improvements, including the ability to have "icon sets" (contributed by Raal Goff). Note: the user interface for this feature is not included yet
  * Fixed issue with "Set nameserver" and "Auto connect on launch" checkboxes being cleared on quit if the "Details…" window was never displayed
  * Fixed issue which caused disconnects when any file in ~/Library/openvpn was accessed (for example, by backup software). (Note that changing, adding, or deleting any configuration files will close all open connections)
  * Fixed issue with failed authentication: now handled gracefully: allows cancel or retry. If credentials are stored in the Keychain, also allows retry with new credentials (by deleting the old credentials before the retry)
  * Fixed issue with multiple connections with same username; separate passwords are now kept for each username
  * Fixed issue in dialog about configuration files - the correct path is now shown: "~/Library" instead of "/Library"
  * Command-C, Command-X, Command-V (copy, cut, paste) and Command-A, Command-M, Command-W, and Command-Q (select all, minimize to the Dock, close window, and quit Tunnelblick) now work properly from the "Details…" window
  * Fixed issue which caused invalid dates/times to appear in the OpenVPN Log
  * Shows connection duration in "Details…" window's tabs
  * Fixed issue which caused the "Details…" window to remain underneath other windows when the "Details..." menu item is clicked
  * Added date/time and Tunnelblick and OpenVPN version info at the beginning of the OpenVPN Log and whenever it is cleared
  * Saves and restores "Details…" window size and position
  * Internationalized date/time displayed in the OpenVPN Log, including seconds
  * Fixed bug which caused Japanese localization to fail
  * Displays tab for the left-most established connection when the "Details…" window is first displayed. If no established connection exists, displays the left-most tab
  * Added the "Using Tunnelblick.html" document to the installation disk image
  * Added preference, "doNotMonitorConfigurationFolder" (default = False) to disable monitoring of the configuration folder for changes to the configuration files
  * Added preference, "placeIconInStandardPositionInStatusBar" (default = False) to have the Tunnelblick icon placed normally in the Status Bar -- to the left of other items (contributed by Raal Goff and Michael Schloh von Bennewitz) 
  * Added an "About" window that displays a link to the website, Tunnelblick version and build numbers, and the OpenVPN version number, which is dynamically extracted from the openvpn program (and thus always reports the version of OpenVPN which is actually being used).
  * Fixed issue which caused Tunnelblick to pass the "script-security 2" arguments to OpenVPN even if a version of OpenVPN which doesn't support that argument is being used
  * openvpnstart enhancements:
      * The "Set nameserver" argument is now optional and defaults to 0 (NO)
      * Optional argument skips passing the "script-security 2" arguments to OpenVPN.
      * Improved error checking and reporting
      * Displays usage instructions if invoked with no arguments
      * Fixed program crashes caused by improper syntax
      * "killall" command shows # of openvpn processes killed if non-zero

Known Issues:
  * Home folders cannot reside on remote volumes (AFS, NFS, etc.)
  * French, Japanese, and Norwegian localization is not complete.
  * The standard scripts that "Set nameserver" uses handle DNS for the most common DHCP setups. You must use custom scripts to do anything else. The standard scripts:
      * Do not support multiple simultaneous connections
      * Do not support multiple nameservers for multiple domains (e.g., local nameserver and remote nameserver simultaneously)
      * Do not remove manual DNS entries (i.e., the manual nameserver will continue to be used even when the tunnel is open even if the OpenVPN "redirect-gateway" option is specified)

--------------------

*3.0b10 (2008-11-20)*
  
  * fix linking problem that resulted in lzo compression not working on PowerPC 
  * prevent user from launching tunnelblick directly from the dmg
  * remove experimental status from 'Set Nameserver' and make it the default
  * upgrade to OpenVPN 2.1_rc15
  * let buffered openvpn log messages appear in the GUI log
  * possible fix for the crash if password is mistyped when using username/password authentication
  * add version number to plist file
  * don't restart connections on !NetworkDidChange notification. fixes issue where existing connections would be reset when starting multiple simultaneous vpn connections.
  * always use --script-security 2 so users are allowed to supply custom up/down scripts. needed for OpenVPN 2.1
  * add missing example config file
  * properly escape special chars in username or password/passphrase before passing them over to the management interface. fixes issue where the password/passphrase was not accepted when it contained backslashes or " chars.
  * use NSStatusWindowLevel for notification windows. fixes issue that Tunnelblick icon remained visible in spaces or fullscreen mode of some apps.
  * increase robustness when killing openvpn children by explicitly sending the SIGTERM to the process id instead of just sending "signal SIGTERM" over the management socket
  * kill all openvpn processes on quit. fixes a rare condition where openvpn processes would be left over on Tunnelblick  quit
  * Add German, French, Japanese, Korean and Norwegian translations
  
--------------------

*3.0b9 (2008-07-24)*

  * Fixed the crash on Leopard
  * Fixes the slow shutdown issue
  * Updated to the new tun/tap drivers
  * Auto-Update Capability using Sparkle

------------------

===PLEASE USE THE [http://groups.google.com/group/tunnelblick-discuss TUNNELBLICK DISCUSSION GROUP] FOR COMMENTS OR QUESTIONS===